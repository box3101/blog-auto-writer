<template>
    <div class="style-settings">
      <div class="header">
        <h2>ğŸ’¬ ë§íˆ¬ ì„¤ì •</h2>
        <p>ì•¨ë¦¬ìŠ¤ë‹˜ë§Œì˜ íŠ¹ë³„í•œ ë¸”ë¡œê·¸ ë§íˆ¬ë¥¼ ì„¤ì •í•´ë³´ì„¸ìš”</p>
      </div>
  
      <div class="toggle-section">
        <div class="toggle-card">
          <div class="toggle-info">
            <h3>âœ¨ ì•¨ë¦¬ìŠ¤ ìŠ¤íƒ€ì¼ ì‚¬ìš©</h3>
            <p>ì¹œê·¼í•˜ê³  ìì—°ìŠ¤ëŸ¬ìš´ ê°œì¸ ë¸”ë¡œê±° ë§íˆ¬</p>
          </div>
          <label class="toggle-switch">
            <input 
              type="checkbox" 
              v-model="writingStyle.enabled"
              @change="updateStyle"
            >
            <span class="slider"></span>
          </label>
        </div>
      </div>
  
      <div v-if="writingStyle.enabled" class="settings-grid">
        <div class="setting-card">
          <label class="setting-label">
            <span class="label-icon">ğŸ‘‹</span>
            <span class="label-text">ì‹œì‘ ì¸ì‚¬ë§</span>
          </label>
          <textarea 
            v-model="writingStyle.greeting"
            @input="updateStyle"
            placeholder="ì•ˆë…•í•˜ì„¸ìš” ì•¨ë¦¬ìŠ¤ì…ë‹ˆë‹¤ :) ì˜¤ëŠ˜ ì†Œê°œí•´ë“œë¦´ ê³³ì€"
            rows="2"
          ></textarea>
          <small class="hint">ë¸”ë¡œê·¸ ê¸€ ì‹œì‘ ë¶€ë¶„ì— ì‚¬ìš©ë  ì¸ì‚¬ë§</small>
        </div>
  
        <div class="setting-card">
          <label class="setting-label">
            <span class="label-icon">ğŸ‘‹</span>
            <span class="label-text">ë§ˆë¬´ë¦¬ ë©˜íŠ¸</span>
          </label>
          <textarea 
            v-model="writingStyle.ending"
            @input="updateStyle"
            placeholder="ë‹¤ìŒì—ë„ ë” ì¢‹ì€ ë§›ì§‘ìœ¼ë¡œ ì°¾ì•„ëµê²Œìš”~"
            rows="2"
          ></textarea>
          <small class="hint">ë¸”ë¡œê·¸ ê¸€ ë§ˆì§€ë§‰ì— ì‚¬ìš©ë  ë§ˆë¬´ë¦¬ ì¸ì‚¬</small>
        </div>
  
        <div class="setting-card">
          <label class="setting-label">
            <span class="label-icon">ğŸ˜Š</span>
            <span class="label-text">ìì£¼ ì“°ëŠ” í‘œí˜„</span>
          </label>
          <textarea 
            v-model="writingStyle.expressions"
            @input="updateStyle"
            placeholder="ã…ã…, ã…‹ã…‹ã…‹, ğŸ˜Š, ì§„ì§œ, ë„ˆë¬´, ì •ë§, ì™€..., ë ˆì•Œ"
            rows="2"
          ></textarea>
          <small class="hint">ê¸€ì— ìì—°ìŠ¤ëŸ½ê²Œ í¬í•¨ë  í‘œí˜„ë“¤ (ì‰¼í‘œë¡œ êµ¬ë¶„)</small>
        </div>
  
        <div class="setting-card">
          <label class="setting-label">
            <span class="label-icon">â“</span>
            <span class="label-text">ì§ˆë¬¸ ìŠ¤íƒ€ì¼</span>
          </label>
          <textarea 
            v-model="writingStyle.questionStyle"
            @input="updateStyle"
            placeholder="~ì§€ ì•Šë‚˜ìš”? ~í•˜ëŠ” ìƒê°ì´ ë“¤ì—ˆì–´ìš”~"
            rows="2"
          ></textarea>
          <small class="hint">ë…ìì™€ ì†Œí†µí•˜ëŠ” ì§ˆë¬¸ í˜•íƒœ í‘œí˜„</small>
        </div>
  
        <div class="setting-card full-width">
          <label class="setting-label">
            <span class="label-icon">ğŸ¨</span>
            <span class="label-text">ì „ì²´ì ì¸ í†¤</span>
          </label>
          <textarea 
            v-model="writingStyle.tone"
            @input="updateStyle"
            placeholder="ì¹œê·¼í•˜ê³  ë°ì€ ë§íˆ¬ë¡œ ê°œì¸ì ì¸ ê²½í—˜ì²˜ëŸ¼"
            rows="2"
          ></textarea>
          <small class="hint">AIê°€ ì°¸ê³ í•  ì „ì²´ì ì¸ ê¸€ì“°ê¸° ìŠ¤íƒ€ì¼ ì„¤ëª…</small>
        </div>
      </div>
  
      <div v-if="writingStyle.enabled" class="preview-section">
        <h3>ğŸ“ ë¯¸ë¦¬ë³´ê¸°</h3>
        <div class="preview-card">
          <div class="preview-greeting">{{ writingStyle.greeting }}</div>
          <div class="preview-content">
            [í‚¤ì›Œë“œ ê¸°ë°˜ ë³¸ë¬¸ ë‚´ìš©ì´ ì—¬ê¸°ì— ë“¤ì–´ê°‘ë‹ˆë‹¤]<br>
            ì •ë§ ì¢‹ì€ ê³³ì´ì—ˆì–´ìš” ã…ã… ë‹¤ë“¤ ì–´ë–»ê²Œ ìƒê°í•˜ì‹œë‚˜ìš”?
          </div>
          <div class="preview-ending">{{ writingStyle.ending }}</div>
        </div>
      </div>
  
      <div class="action-buttons">
        <button class="btn-reset" @click="resetToDefault">
          ğŸ”„ ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”
        </button>
        <button class="btn-save" @click="saveSettings">
          ğŸ’¾ ì„¤ì • ì €ì¥
        </button>
      </div>
    </div>
  </template>
  
  <script>
  import { useBlogStore } from '@/stores/blog'
  import { storeToRefs } from 'pinia'
  
  export default {
    setup() {
      const blogStore = useBlogStore()
      const { writingStyle } = storeToRefs(blogStore)
      const { updateWritingStyle } = blogStore
  
      const updateStyle = () => {
        updateWritingStyle(writingStyle.value)
      }
  
      const resetToDefault = () => {
        const defaultStyle = {
          enabled: true,
          greeting: "ì•ˆë…•í•˜ì„¸ìš” ì•¨ë¦¬ìŠ¤ì…ë‹ˆë‹¤ :) ì˜¤ëŠ˜ ì†Œê°œí•´ë“œë¦´ ê³³ì€",
          ending: "ë‹¤ìŒì—ë„ ë” ì¢‹ì€ ë§›ì§‘ìœ¼ë¡œ ì°¾ì•„ëµê²Œìš”~",
          expressions: "ã…ã…, ã…‹ã…‹ã…‹, ğŸ˜Š, ì§„ì§œ, ë„ˆë¬´, ì •ë§, ì™€..., ë ˆì•Œ",
          questionStyle: "~ì§€ ì•Šë‚˜ìš”? ~í•˜ëŠ” ìƒê°ì´ ë“¤ì—ˆì–´ìš”~",
          tone: "ì¹œê·¼í•˜ê³  ë°ì€ ë§íˆ¬ë¡œ ê°œì¸ì ì¸ ê²½í—˜ì²˜ëŸ¼"
        }
        updateWritingStyle(defaultStyle)
        alert('ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤!')
      }
  
      const saveSettings = () => {
        // ë‚˜ì¤‘ì— localStorage ì €ì¥ ê¸°ëŠ¥ ì¶”ê°€ ê°€ëŠ¥
        alert('ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤! âœ¨')
      }
  
      return {
        writingStyle,
        updateStyle,
        resetToDefault,
        saveSettings
      }
    }
  }
  </script>
  
  <style scoped>
  .style-settings {
    max-width: 900px;
    margin: 0 auto;
    padding: 0;
  }
  
  .header {
    text-align: center;
    margin-bottom: 30px;
  }
  
  .header h2 {
    font-size: 2.2em;
    color: #2d3748;
    margin-bottom: 10px;
    font-weight: 700;
  }
  
  .header p {
    color: #718096;
    font-size: 1.1em;
  }
  
  .toggle-section {
    margin-bottom: 30px;
  }
  
  .toggle-card {
    background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
    border: 2px solid #e2e8f0;
    border-radius: 16px;
    padding: 25px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 4px 20px rgba(0,0,0,0.06);
  }
  
  .toggle-info h3 {
    margin: 0 0 5px 0;
    color: #2d3748;
    font-size: 1.3em;
    font-weight: 600;
  }
  
  .toggle-info p {
    margin: 0;
    color: #718096;
    font-size: 0.95em;
  }
  
  .toggle-switch {
    position: relative;
    display: inline-block;
    width: 60px;
    height: 30px;
  }
  
  .toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
  }
  
  .slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #cbd5e0;
    transition: 0.3s;
    border-radius: 30px;
  }
  
  .slider:before {
    position: absolute;
    content: "";
    height: 22px;
    width: 22px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: 0.3s;
    border-radius: 50%;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  }
  
  input:checked + .slider {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }
  
  input:checked + .slider:before {
    transform: translateX(30px);
  }
  
  .settings-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 30px;
  }
  
  .setting-card {
    background: white;
    border: 2px solid #e2e8f0;
    border-radius: 16px;
    padding: 20px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.04);
    transition: all 0.3s;
  }
  
  .setting-card:hover {
    border-color: #cbd5e0;
    box-shadow: 0 8px 24px rgba(0,0,0,0.08);
  }
  
  .setting-card.full-width {
    grid-column: 1 / -1;
  }
  
  .setting-label {
    display: flex;
    align-items: center;
    margin-bottom: 12px;
    font-weight: 600;
    color: #2d3748;
  }
  
  .label-icon {
    font-size: 1.2em;
    margin-right: 8px;
  }
  
  .label-text {
    font-size: 1em;
  }
  
  textarea {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid #e2e8f0;
    border-radius: 12px;
    font-size: 14px;
    font-family: inherit;
    resize: vertical;
    transition: border-color 0.3s;
    background: #f7fafc;
  }
  
  textarea:focus {
    outline: none;
    border-color: #667eea;
    background: white;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
  }
  
  .hint {
    display: block;
    margin-top: 8px;
    color: #718096;
    font-size: 0.85em;
    line-height: 1.4;
  }
  
  .preview-section {
    background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%);
    border: 2px solid #b3d9ff;
    border-radius: 16px;
    padding: 25px;
    margin-bottom: 30px;
  }
  
  .preview-section h3 {
    margin: 0 0 15px 0;
    color: #2d3748;
    font-size: 1.2em;
    font-weight: 600;
  }
  
  .preview-card {
    background: white;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  }
  
  .preview-greeting {
    color: #667eea;
    font-weight: 600;
    margin-bottom: 15px;
    font-size: 1.05em;
  }
  
  .preview-content {
    color: #4a5568;
    line-height: 1.6;
    margin: 15px 0;
    padding: 10px 0;
    border-top: 1px solid #e2e8f0;
    border-bottom: 1px solid #e2e8f0;
  }
  
  .preview-ending {
    color: #667eea;
    font-weight: 600;
    margin-top: 15px;
    font-size: 1.05em;
  }
  
  .action-buttons {
    display: flex;
    gap: 15px;
    justify-content: center;
  }
  
  .btn-reset, .btn-save {
    padding: 12px 24px;
    border: none;
    border-radius: 12px;
    font-size: 1em;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    min-width: 150px;
  }
  
  .btn-reset {
    background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
    color: white;
    box-shadow: 0 4px 12px rgba(245, 101, 101, 0.3);
  }
  
  .btn-reset:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(245, 101, 101, 0.4);
  }
  
  .btn-save {
    background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
    color: white;
    box-shadow: 0 4px 12px rgba(72, 187, 120, 0.3);
  }
  
  .btn-save:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(72, 187, 120, 0.4);
  }
  
  /* ë°˜ì‘í˜• */
  @media (max-width: 768px) {
    .settings-grid {
      grid-template-columns: 1fr;
      gap: 15px;
    }
    
    .toggle-card {
      flex-direction: column;
      gap: 15px;
      text-align: center;
    }
    
    .action-buttons {
      flex-direction: column;
      align-items: center;
    }
    
    .btn-reset, .btn-save {
      width: 100%;
      max-width: 250px;
    }
  }
  </style>